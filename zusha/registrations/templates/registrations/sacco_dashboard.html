<!DOCTYPE html>
<html>
    <head>
        <style>
            body{
            background-color: whitesmoke;
            margin: auto;
            width: 100%;
            }
            #contents{
                margin: auto;
                width: 100%;
            }
            /* #header{
                background-color: floralwhite;
                text-align: center;
                font-size: large;
                width: fit-content;
                height: 50px;
            } */
            #menu{
                position: -webkit-sticky;
                position: sticky;
                top: 0;
                /* width: fit-content; */
                width: 100%;
            }
            ul {
                list-style-type: none;
                margin: 0;
                padding: 0;
                overflow: hidden;
                background-color: rgb(73, 33, 33);
                
            }

            li {
                float: left;
            }
        
            li a {
                display: block;
                color: white;
                text-align: center;
                padding: 14px 16px;
                text-decoration: none;
            }
        
            li a:hover:not(.active) {
                background-color: #111;
            }
            .active {
                background-color: #4CAF50;
            }

            #management{
                background-color: white;
                height: 50px;
                padding: 5px;
                /* text-align: center; */
                width: 90%;
                /* width: fit-content; */
                margin: 10px;
                border-radius: 1px;
            }
            #management-text{
                text-align: center;
                font-size: xx-large;
                font-weight: bold;
                padding: 5px;
            }
            #top-of-mind{
                width: 90%;
                height: 200px;
                background-color: white;
                padding: 5px;
                border-radius: 5px;
                margin: 10px;
            }
            #registrations{
                width: 90%;
                height: 150px;
                background-color: white;
                padding: 5px;
                border-radius: 5px;
                margin: 10px;
            }
            #registrations a {
                text-decoration: none;
            }
            #top-of-mind-pending-reports{
                width: 31.5%;
                height: 100px;
                background-color: wheat;
                padding: 10px;
                border-radius: 5px;
                margin: 5px;
                float: left;

            }
            
            #top-of-mind-in-progress-reports{
                width: 31.5%;
                float: left;
                height: 100px;
                margin: 5px;
                padding: 10px;
                border-radius: 5px;
                background-color: wheat;
            }
            #top-of-mind-resolved-reports{
                width: 31.5%;
                float: left;
                height: 100px;
                margin: 5px;
                padding: 10px;
                border-radius: 5px;
                background-color: wheat;
            }
            #top-of-mind-pending-reports:hover, #top-of-mind-in-progress-reports:hover, #top-of-mind-resolved-reports:hover{
                background-color: orange;
            }
            #pending-reports-number, #reports-in-progress-number, #resolved-reports-number{
                font-size: xx-large;
            }
            #vehicles-management, #drivers-management{
                width: 48%;
                float: left;
                height: 100%;
                margin: 5px;
                padding: 10px;
                border-radius: 5px;
                /* background-color: yellow; */
                /* text-align: center; */
                font-size: large;
            }
            #add-vehicle, #sacco-vehicles-link, #add-driver, #sacco-drivers-link{
                text-align: center;
                background-color: wheat;
                /* height: 80px; */
                margin: 3px;
                padding: 10px;

            }
            #add-vehicle:hover, #add-driver:hover, #sacco-vehicles-link:hover, #sacco-drivers-link:hover{
                background-color: goldenrod;
                }
            #ones-to-watch{
                width: 90%;
                height: 1000px;
                background-color: white;
                padding: 5px;
                border-radius: 5px;
                margin: 10px;
            }
            #registrations-header, #top-of-mind-header-text{
                text-align: left;
                font-size: large;
                font-weight: bold;
                padding: 3px;
            }
            #ones-to-watch-header{
                text-align: center;
                font-size: large;
                font-weight: bold;
                padding: 3px;
            }

            #recent-top-reported-vehicles, #recent-top-reported-drivers{
                width: 48%;
                float: left;
                height: 88%;
                margin: 5px;
                padding: 10px;
                border-radius: 5px;
                background-color: wheat;
            }
            #top-reported-vehicles-header, #top-reported-drivers-header{
                background-color: white;
                height: 20px;
                padding: 5px;
                width: 98%;
                margin: 5px;
                border-radius: 3px;
            }
            #top-reported-vehicles-table, #top-reported-drivers-table{
                background-color: white;
                height: 95%;
                padding: 5px;
                width: 98%;
                margin: 5px;
                border-radius: 3px;
            }
            #pending{
                background-color: red;
                color: white;
                border-radius: 3px;
                padding: 5px;
            }
            #in-progress{
                background-color: rgb(255, 123, 0);
                color: white;
                border-radius: 3px;
                padding: 5px;
            }
            #resolved{
                background-color: rgb(11, 182, 11);
                color: white;
                border-radius: 3px;
                padding: 5px;
            }
            #pending:hover, #in-progress:hover, #resolved:hover{
                font-weight: bold;
                /* background-color: blue; */
            }
            #missing-driver{
                background-color: red;
                color: white;
                padding: 5px;
                border-radius: 3px;
            }
            #missing-driver:hover{
                padding: 10px;
                font-weight: bold;
            }
            table {
            font-family: arial, sans-serif;
            border-collapse: collapse;
            width: 100%;
            }

            td, th {
            border: 1px solid #dddddd;
            text-align: left;
            padding: 10px;
            }

            tr:nth-child(even) {
            background-color: #dddddd;
            }
            .blink_img {
            animation: blinker 2s linear infinite;
            }
            @keyframes blinker {
            50% { opacity: 0; }
            }
            @keyframes blinker {
            50% { opacity: 0; }
            }
            /* .blinking{
            animation:blinkingText 1.2s infinite;
            }
            /* @keyframes blinker{
                0%{     color: #000;    }
                49%{    color: #000; }
                60%{    color: transparent; }
                99%{    color:transparent;  }
                100%{   color: #000;    }
            } */



            @media screen and (max-width: 800px) {
                #top-of-mind{
                    height: 400px;
                    width: 100%;
                    padding: 0;
                }
                #top-of-mind-pending-reports, #top-of-mind-in-progress-reports, #top-of-mind-resolved-reports {   
                width: 97%;
                padding: 3px;
                margin-left: 3px;
                margin-right: 3px;
                margin-top: 3px;
                float: none;
                }
                #management{
                    height: 350px;
                    width: 100%;
                }
                #add-vehicle, #add-driver{
                    width: 93%;
                    margin: 3px;
                }
            }

        </style>
    </head>
    <body>
        <div id="contents">
            <div id="menu">
                <ul>
                    <li><a href="{% url 'registrations:saccos_dashboard' sacco_id %}">HOME</a></li>
                    <!-- <li><a href="/reports/all">REPORTS</a></li> -->
                    <li><a href="{% url 'registrations:dashboard_sacco_drivers_list' sacco_id %}">DRIVERS</a></li>
                    <!-- <li><a href="/registrations/saccos">SACCOS</a></li> -->
                    <li><a href="{% url 'registrations:sacco_vehicles_list' sacco_id %}">VEHICLES</a></li>
                    <!-- <li><a href="{% url 'registrations:sacco_logout' %}">LOGOUT</a></li> -->
                    <li><a href="">LOGOUT</a></li>
                </ul>
            </div>
            <div id="management">
                <div id="management-text">{{sacco_header}} ADMIN DASHBOARD</div>
            </div>
            <div id="top-of-mind">
                <div id="top-of-mind-header">
                    <div id="top-of-mind-header-text">TOP OF MIND</div>
                </div>
                <div id="top-of-mind-pending-reports">
                    <div id="pending-reports-text">
                        NEW PENDING REPORTS
                    </div>
                    <div id="pending-reports-number">
                        <a href="/registrations/saccos/dashboard/{{sacco_id}}/pending_reports/">{{pending_reports}}</a>
                    </div>
                </div>
                <div id="top-of-mind-in-progress-reports">
                    <div id="reports-in-progress-text">
                        REPORTS IN PROGRESS
                    </div>
                    <div id="reports-in-progress-number">
                        <a href="/registrations/saccos/dashboard/{{sacco_id}}/in_progress_reports/">{{in_progress_reports}}</a> 
                    </div>
                </div>
                <div id="top-of-mind-resolved-reports">
                    <div id="resolved-reports-text">
                        RESOLVED CASES
                    </div>
                    <div id="resolved-reports-number">
                        <a href="/registrations/saccos/dashboard/{{sacco_id}}/resolved_reports/">{{resolved_sacco_reports}}</a> 
                    </div>
                </div>
            </div>
            
            <div id="registrations">
                <div id="registrations-header">REGISTRATIONS</div>
                <div id="vehicles-management">
                    <a href="{% url 'registrations:add_vehicle' sacco_id %}">
                        <div id="add-vehicle">Add a vehicle</div>
                    </a>
                    <a href="{% url 'registrations:sacco_vehicles_list' sacco_id %}">
                        <div id="sacco-vehicles-link">ALL VEHICLES LIST</div>
                    </a>
                    
                </div>
                <div id="drivers-management">
                    <a href="{% url 'registrations:add_driver' sacco_id %}">
                        <div id="add-driver">Add a driver</div>
                    </a>
                    <a href="{% url 'registrations:dashboard_sacco_drivers_list' sacco_id %}">
                        <div id="sacco-drivers-link">ALL DRIVERS LIST</div>
                    </a>
                    
                </div>
            </div>
            <div id="ones-to-watch">
                <div id="ones-to-watch-header">ONES TO WATCH</div>
                <div id="recent-top-reported-vehicles">
                    <div id="top-reported-vehicles-header">
                        RECENT TOP REPORTED VEHICLES
                    </div>
                    <div id="top-reported-vehicles-table">
                        {% if top_sacco_vehicles %}
                            <table>
                                <tr>
                                    <th>Regno</th>
                                    <th>Sacco</th>
                                    <th>Date</th>
                                    <th>Total</th>
                                    <th>NTSA</th>
                                    <th>SACCO</th>
                                </tr>
                                {% for report in top_sacco_vehicles %}
                                <tr>
                                    <td>{{report.regno}}</td>
                                    <td>{{report.sacco}}</td>
                                    <td>{{report.date}}</td>
                                    <td>{{report.count}}</td>
                                    <td>
                                        {% if report.ntsa_action == "Pending" %}
                                            <div id="pending">{{report.ntsa_action}}</div>
                                        {% elif report.ntsa_action == "In Progress" %}
                                            <div id="in-progress">{{report.ntsa_action}}</div>
                                        {% elif report.ntsa_action == "Resolved" %}
                                            <div id="resolved">{{ report.ntsa_action }}</div>
                                        {% endif %}
                                    </td>
                                    <td>
                                        {% if report.sacco_action == "Pending" %}
                                            <div id="pending">{{report.sacco_action}}</div>
                                        {% elif report.sacco_action == "In Progress" %}
                                            <div id="in-progress">{{report.sacco_action}}</div>
                                        {% elif report.sacco_action == "Resolved" %}
                                            <div id="resolved">{{ report.sacco_action }}</div>
                                        {% endif %}
                                    </td>
                                </tr>
                                {% endfor %}
                            </table>

                        {% else %}
                            No vehicles to display
                        {% endif %}
                    </div>
                </div>
                <div id="recent-top-reported-drivers">
                    <div id="top-reported-drivers-header">
                        RECENT TOP REPORTED DRIVERS
                    </div>
                    <div id="top-reported-drivers-table">
                        {% if top_sacco_drivers %}
                        <table>
                            <tr>
                                <th>DRIVER</th>
                                <th>REGNO</th>
                                <th>SACCO</th>
                                <th>DATE</th>
                                <th>TOTAL</th>
                            </tr>
                            {% for report in top_sacco_drivers %}
                            <tr>
                                <td>
                                    {% if report.driver %}
                                        {{report.driver}}
                                    {% else %}
                                        <div id="missing-driver">
                                            DRIVER(S) NOT SUBMITTED!
                                        </div>
                                    {% endif %}
                                </td>
                                <td>{{report.regno}}</td>
                                <td>{{report.sacco}}</td>
                                <td>{{report.date}}</td>
                                <td>{{report.count}}</td>
                            </tr>
                            {% endfor %}
                        </table>
                        {% else %}
                            No drivers have been reported yet
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </body>
    

</html>